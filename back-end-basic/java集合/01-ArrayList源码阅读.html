<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ArrayListæºç é˜…è¯» | æ€è€ƒå­¦ä¹ ä»“åº“</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="æ€è€ƒå­¦ä¹ ä»“åº“æ²‰æ·€">
    
    <link rel="preload" href="/back-end/assets/css/0.styles.e1ce56f9.css" as="style"><link rel="preload" href="/back-end/assets/js/app.e2101455.js" as="script"><link rel="preload" href="/back-end/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/back-end/assets/js/32.a174a815.js" as="script">
    <link rel="stylesheet" href="/back-end/assets/css/0.styles.e1ce56f9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/back-end/" class="home-link router-link-active"><!----> <span class="site-name">æ€è€ƒå­¦ä¹ ä»“åº“</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/back-end/" class="nav-link">
  æ€è€ƒå­¦ä¹ ä»“åº“
</a></div><div class="nav-item"><a href="/back-end/back-end-basic/" class="nav-link router-link-active">
  javaåŸºç¡€
</a></div><div class="nav-item"><a href="/back-end/middleware/" class="nav-link">
  ä¸­é—´ä»¶
</a></div><div class="nav-item"><a href="/back-end/spring/" class="nav-link">
  Springæ¡†æ¶
</a></div><div class="nav-item"><a href="/back-end/microservices/" class="nav-link">
  å¾®æœåŠ¡æ¡†æ¶
</a></div><div class="nav-item"><a href="/back-end/database/" class="nav-link">
  æ•°æ®åº“ç¯‡ç« 
</a></div> <a href="https://github.com/think-studio/back-end" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/back-end/" class="nav-link">
  æ€è€ƒå­¦ä¹ ä»“åº“
</a></div><div class="nav-item"><a href="/back-end/back-end-basic/" class="nav-link router-link-active">
  javaåŸºç¡€
</a></div><div class="nav-item"><a href="/back-end/middleware/" class="nav-link">
  ä¸­é—´ä»¶
</a></div><div class="nav-item"><a href="/back-end/spring/" class="nav-link">
  Springæ¡†æ¶
</a></div><div class="nav-item"><a href="/back-end/microservices/" class="nav-link">
  å¾®æœåŠ¡æ¡†æ¶
</a></div><div class="nav-item"><a href="/back-end/database/" class="nav-link">
  æ•°æ®åº“ç¯‡ç« 
</a></div> <a href="https://github.com/think-studio/back-end" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>javaé›†åˆ</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/back-end/back-end-basic/javaé›†åˆ/01-ArrayListæºç é˜…è¯».html" class="active sidebar-link">ArrayListæºç é˜…è¯»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/back-end/back-end-basic/javaé›†åˆ/01-ArrayListæºç é˜…è¯».html#æ•°æ®ç»“æ„å’Œå‚æ•°" class="sidebar-link">æ•°æ®ç»“æ„å’Œå‚æ•°</a></li><li class="sidebar-sub-header"><a href="/back-end/back-end-basic/javaé›†åˆ/01-ArrayListæºç é˜…è¯».html#æ–¹æ³•" class="sidebar-link">æ–¹æ³•</a></li></ul></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/02-LinkedListæºç åˆ†æ.html" class="sidebar-link">LinkedListæºç åˆ†æ</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/Vector.html" class="sidebar-link">Vector</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/ArrayDeque.html" class="sidebar-link">ArrayDeque</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/HashMap.html" class="sidebar-link">HashMap</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/Hashtable.html" class="sidebar-link">Hashtable</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/LinkedHashMap.html" class="sidebar-link">LinkedHashMap</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/WeakHashMap.html" class="sidebar-link">WeakHashMap</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/ArrayBlockingQueue.html" class="sidebar-link">ArrayBlockingQueue</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/ConcurrentHashMap.html" class="sidebar-link">ConcurrentHashMap</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/ConcurrentLinkedDeque.html" class="sidebar-link">ConcurrentLinkedDeque</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/ConcurrentSkipListMap.html" class="sidebar-link">ConcurrentSkipListMap</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/ConcurrentSkipListSet.html" class="sidebar-link">ConcurrentSkipListSet</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/CopyOnWriteArrayList.html" class="sidebar-link">CopyOnWriteArrayList</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/CopyOnWriteArraySetDelayQueue.html" class="sidebar-link">CopyOnWriteArraySetDelayQueue</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/LinkedBlockingDeque.html" class="sidebar-link">LinkedBlockingDeque</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/LinkedBlockingQueue.html" class="sidebar-link">LinkedBlockingQueue</a></li><li><a href="/back-end/back-end-basic/javaé›†åˆ/PriorityBlockingQueue.html" class="sidebar-link">PriorityBlockingQueue</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javaæµ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javaçº¿ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javaç½‘ç»œ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>jvm</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="arraylistæºç é˜…è¯»"><a href="#arraylistæºç é˜…è¯»" class="header-anchor">#</a> ArrayListæºç é˜…è¯»</h1> <h1 id="ğŸ“-arraylistæºç åˆ†æ"><a href="#ğŸ“-arraylistæºç åˆ†æ" class="header-anchor">#</a> ğŸ“ <strong>ArrayListæºç åˆ†æ</strong></h1> <p>ArrayList æ˜¯ä»£ç ä¸­ä½¿ç”¨éå¸¸é¢‘ç¹çš„,æ‰€ä»¥çœ‹åº•å±‚çš„ä»£ç æ—¶éå¸¸æœ‰å¿…é¡»çš„.</p> <h2 id="æ•°æ®ç»“æ„å’Œå‚æ•°"><a href="#æ•°æ®ç»“æ„å’Œå‚æ•°" class="header-anchor">#</a> æ•°æ®ç»“æ„å’Œå‚æ•°</h2> <p>DEFAULT_CAPACITY : é»˜è®¤é›†åˆå¤§å°;é»˜è®¤å€¼æ˜¯10</p> <p>EMPTY_ELEMENTDATA : ç©ºçš„Objectæ•°ç»„,ç”¨äºåç»­çš„åˆå§‹åŒ–å’Œèµ‹å€¼</p> <p>DEFAULTCAPACTITY_EMPTY_ELEMENTDATA: é»˜è®¤ç©ºçš„Objectæ•°ç»„,ä¹Ÿæ˜¯ç”¨äºåç»­çš„åˆ¤æ–­å’Œèµ‹å€¼</p> <p>elementData: å­˜æ”¾ArrayListæ•°æ®çš„æ•°ç»„</p> <p>size: è®°å½•ArrayListä¸­å…ƒç´ çš„ä¸ªæ•°;sizeä¸ä¸€å®šæ˜¯elementDataçš„é•¿åº¦</p> <p>ArrayList æ˜¯ä¸€ä¸ªç”± Object [] çš„æ•°ç»„æ¥å®ç°çš„;transient Object[] elementData ,è¿™ä¸ªå˜é‡å°±æ˜¯å­˜æ”¾æ•°æ®çš„</p> <p>é•¿åº¦æ˜¯ç”¨ size è¿™ä¸ªå˜é‡æ¥è®°å½•çš„,è€Œä¸æ˜¯ç›´æ¥è°ƒç”¨çš„æ•°ç»„çš„é•¿åº¦</p> <p>å¦‚æœArrayList list = new ArrayList(); åªæ˜¯ä»…ä»…newä¸€ä¸ªé›†åˆçš„è¯,æ•°ç»„çš„å¤§å°æ˜¯æ²¡æœ‰åˆå§‹åŒ–ä¸º10çš„,è€Œæ˜¯åœ¨add()ä¸­,è¿›è¡Œåˆ¤æ–­ã€‚ å¦‚æœæ•°ç»„çš„æ˜¯ä¸ºç©ºçš„æ•°ç»„çš„è¯,å°±ä¼šä½¿ç”¨Â <strong>DEFAULT_CAPACITY</strong>Â æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚ä¹Ÿå°±æ˜¯è¦è°ƒç”¨addæ–¹æ³•æ‰è¡Œ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="header-anchor">#</a> æ–¹æ³•</h2> <h3 id="addæ–¹æ³•"><a href="#addæ–¹æ³•" class="header-anchor">#</a> addæ–¹æ³•</h3> <p>add é‡Œé¢æ˜¯èµ°äº†ä¸‰ä¸ªæ–¹æ³•, size æ²¡æœ‰èµ‹å€¼çš„æƒ…å†µä¸‹,å°±æ˜¯0</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>
    elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç¡®è®¤å®¹é‡ , æ‰“ä¸ªæ¯”æ–¹æˆ‘ä»¬æ²¡æœ‰å¯¹sizeè¿›è¡Œèµ‹å€¼,é‚£ä¹ˆsize + 1 ä¼ å…¥åˆ°è¿™ä¸ªé‡Œé¢çš„å€¼ä¹Ÿå°±æ˜¯1,é‚£ä¹ˆ elementData å¯¹åº”çš„ä¹Ÿå°±æ˜¯ä¸€ä¸ªç©ºæ•°ç»„</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token function">calculateCapacity</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//  æ»¡è¶³æ˜¯ç©ºæ•°ç»„çš„è¯,å°±ä¼šä½¿ç”¨é»˜è®¤çš„å€¼ 10 äº minCapcacity æ¥è¿›è¡Œå¯¹æ¯”,è¿™é‡Œè¿”å›çš„10</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calculateCapacity</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">,</span> <span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> <span class="token constant">DEFAULTCAPACITY_EMPTY_ELEMENTDATA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_CAPACITY</span><span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> minCapacity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token comment">//  å¦‚æœ minCapacity  å‡å» æ•°ç»„çš„é•¿åº¦æ˜¯å¤§äº0çš„,å°±ä¼šè°ƒç”¨growæ¥è¿›è¡Œæ‰©å®¹</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>

        <span class="token comment">// overflow-conscious code</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

<span class="token comment">// è¿™é‡Œå¯ä»¥çœ‹åˆ°å…ˆå¯¹æ•°ç»„çš„å€¼è¿›è¡Œ,ç„¶åå¯¹ä¿å­˜å‡ºæ¥çš„å€¼è¿›è¡Œ1.5å€æ‰©å®¹,ä¸ä¼ å…¥è¿›æ¥çš„å€¼è¿›è¡Œå¯¹æ¯”,æ»¡è¶³æ¡ä»¶èµ‹å€¼.è¿™é‡Œå°±è¦çœ‹åˆ° Arrays.copyOf(elementDate,newCapacity); è¿™æ‰æ˜¯çœŸæ­£çš„å¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹çš„æ–¹æ³•,ä¹Ÿå°±æ˜¯ç›´æ¥è°ƒç”¨Arraysçš„API. Arrays.copyOf() é‡Œé¢æœ€åä¹Ÿæ˜¯è°ƒç”¨äº† System.arraycopy()çš„æ–¹æ³•</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// overflow-conscious code</span>
        <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// minCapacity is usually close to size, so this is a win:</span>
        elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
åˆ°è¿™é‡Œ ensureCapacityInternal æ–¹æ³•ä¹Ÿå°±æ˜¯èµ°å®Œäº†
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
åé¢å°±æ˜¯ä½¿ç”¨ æ•°ç»„ä¸‹æ ‡æ¥è¿›è¡Œèµ‹å€¼å¹¶ä¸”è¿”å›<span class="token boolean">true</span>ã€‚
</code></pre></div><p>æ‰€ä»¥addæ–¹æ³•çš„æ€»ä½“æµç¨‹å¦‚ä¸‹</p> <p><img src="/back-end/assets/img/javaBase/arrayList0.png" alt="addæ–¹æ³•"></p> <h3 id="addæ ¹æ®indexæ·»åŠ "><a href="#addæ ¹æ®indexæ·»åŠ " class="header-anchor">#</a> addæ ¹æ®indexæ·»åŠ </h3> <p>åœ¨ä¸Šè¿°çš„addé€»è¾‘ä¹‹å‰,è¿›è¡Œindexæ˜¯å¦ç¬¦åˆè§„åˆ™çš„æ ¡éªŒ</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
                     size <span class="token operator">-</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
    size<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ£€æŸ¥ä¸‹æ ‡æ˜¯å¦è¶Šç•Œ , ensureCapacityInternal æ–¹æ³•å’Œä¸Šé¢ä¸€æ ·</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> size <span class="token operator">||</span> index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//  System.arraycopy() ä» elementDate çš„ indexå¤„å¼€å§‹å¤åˆ¶, å¤åˆ¶ç»™åé¢çš„elementDateæ•°ç»„çš„å€¼,ä»index + 1 å¼€å§‹å¤åˆ¶,ä¹Ÿå°±æ˜¯è¯´ index ç›¸å½“äºä¿®æ”¹äº† index + 1, ç„¶åindexä½ç½®å°±æ˜¯æ²¡æœ‰å€¼äº†,æ‰€ä»¥elementDate[index] = elementçš„å€¼,size ++.</span>
</code></pre></div><p>æ ¹æ®ä¸‹æ ‡æ·»åŠ å…ƒç´ çš„é€»è¾‘æµç¨‹å›¾</p> <p><img src="/back-end/assets/img/javaBase/arrayList1.png" alt="addæ ¹æ®indexä¸‹æ ‡"></p> <h3 id="setæ–¹æ³•"><a href="#setæ–¹æ³•" class="header-anchor">#</a> setæ–¹æ³•</h3> <p>æ ¹æ®ä¸‹æ ‡æ¥å¯¹ä¹…çš„å€¼è¿›è¡Œä¸€ç§æ›¿æ¢,å–å‡ºå¯¹åº”ä¸‹æ ‡çš„å€¼,ç„¶åä¸‹æ ‡å¯¹åº”çš„ä½ç½®èµ‹å€¼ç»™æ–°å€¼,æœ€åè¿”å›æ—§å€¼å›å»å³å¯</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// å…ˆæ£€æŸ¥ä¸‹æ ‡æ˜¯å¦è¶Šç•Œ,å¦‚æœè¶Šç•Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
    <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å–å‡ºå¯¹åº”ä¸‹æ ‡çš„å€¼</span>
    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;unchecked&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">E</span> <span class="token function">elementData</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>setæ–¹æ³•é€»è¾‘</p> <p><img src="/back-end/assets/img/javaBase/arrayList2.png" alt="setæ–¹æ³•é€»è¾‘"></p> <h3 id="removeæ–¹æ³•"><a href="#removeæ–¹æ³•" class="header-anchor">#</a> removeæ–¹æ³•</h3> <p>æ ¹æ®ä¼ å…¥è¿›æ¥çš„å€¼è¿›è¡Œåˆ é™¤</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// åˆ†ä¸º null å’Œ ä¸æ˜¯ null çš„æƒ…å†µæ¥è¿›è¡Œåˆ é™¤.æ»¡è¶³æ¡ä»¶çš„è¯,æœ€åéƒ½ä¼šè°ƒç”¨åˆ° fastRemoveæ–¹æ³•ä¸­æ¥</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">fastRemove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//  æ ¹æ®ä¼ å…¥è¿›æ¥çš„ ä¸‹æ ‡æ¥åˆ é™¤æ•°æ®,System.arraycopy è¿™ä¸ªæ–¹æ³•å¹¶ä¸é»˜è®¤,æ ¹æ®ä¸‹æ ‡çš„ä½ç½®æ¥è¿›è¡Œå¤åˆ¶æ•°ç»„ã€‚</span>
<span class="token comment">//  å¯ä»¥çœ‹åˆ°æœ€åæœ‰ä¸€ä¸ª å°†å€¼è®¾ç½®ä¸ºnullçš„æ“ä½œ,ä»æ³¨é‡Šä¸Šçœ‹æ˜¯help GC, å¸®åŠ©GC</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">fastRemove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                             numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// clear to let GC do its work</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="removeæ ¹æ®ä¸‹æ ‡åˆ é™¤"><a href="#removeæ ¹æ®ä¸‹æ ‡åˆ é™¤" class="header-anchor">#</a> removeæ ¹æ®ä¸‹æ ‡åˆ é™¤</h3> <p>å¯ä»¥çœ‹åˆ°æ ¹æ®ä¸‹æ ‡åˆ é™¤çš„è¯ï¼Œä¼šå…ˆåˆ¤æ–­ä¼ å…¥è¿›æ¥çš„ä¸‹æ ‡æ˜¯å¦æ»¡è¶³æ¡ä»¶,å°±æ˜¯æ²¡æœ‰å‡ºç°è¶Šç•Œçš„æƒ…å†µ</p> <p>ç„¶åå–å‡ºæ—§å€¼,æ¥ä¸‹æ¥çš„ä»£ç å°±æ˜¯éå¸¸çš„ç†Ÿæ‚‰äº†,å°±æ˜¯fastRemove() é‡Œé¢çš„ä»£ç äº†</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span>
                             numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>
        elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// clear to let GC do its work</span>

        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>æ ¹æ®ä¸‹æ ‡ç§»é™¤å…ƒç´ é€»è¾‘</p> <p><img src="/back-end/assets/img/javaBase/arrayList3.png" alt="removeæ–¹æ³•é€»è¾‘"></p> <h1 id="ğŸ¤—-æ€»ç»“å½’çº³"><a href="#ğŸ¤—-æ€»ç»“å½’çº³" class="header-anchor">#</a> ğŸ¤— æ€»ç»“å½’çº³</h1> <p>å¤§è‡´å°±æ˜¯çœ‹ ArrayList æ˜¯å¦‚ä½•æ·»åŠ æ•°æ®çš„,å¯¹æ•°æ®æ˜¯æ€ä¹ˆä¿å­˜çš„,æ˜¯å¦‚ä½•åˆ é™¤æ•°æ®çš„,æ˜¯æ€ä¹ˆæ ·è¿›è¡Œæ‰©å®¹çš„,å¤§è‡´å¼„æ˜ç™½è¿™äº›å°±æ˜¯å¯¹ArrayListæœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£</p> <h1 id="ğŸ“-å‚è€ƒæ–‡ç« "><a href="#ğŸ“-å‚è€ƒæ–‡ç« " class="header-anchor">#</a> ğŸ“ å‚è€ƒæ–‡ç« </h1> <aside>
ğŸ’¡ æœ‰å…³æ–‡ç« çš„é—®é¢˜ï¼Œæ¬¢è¿æ‚¨åœ¨åº•éƒ¨è¯„è®ºåŒºç•™è¨€ï¼Œä¸€èµ·äº¤æµ~
</aside></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/think-studio/back-end/edit/learn-warehouse/docs/back-end-basic/javaé›†åˆ/01-ArrayListæºç é˜…è¯».md" target="_blank" rel="noopener noreferrer">æ¬¢è¿æ¥åˆ°æ€è€ƒå­¦ä¹ ä»“åº“,ä¸€èµ·æ²‰æ·€çŸ¥è¯†</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/back-end/back-end-basic/javaé›†åˆ/02-LinkedListæºç åˆ†æ.html">
        LinkedListæºç åˆ†æ
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/back-end/assets/js/app.e2101455.js" defer></script><script src="/back-end/assets/js/2.733019b2.js" defer></script><script src="/back-end/assets/js/32.a174a815.js" defer></script>
  </body>
</html>
